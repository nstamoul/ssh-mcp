services:
  ssh-mcp-server:
    # Use host network to access MacBook's VPN interfaces
    # network_mode: "host"
    # Connect to gateway network
    networks:
      - mcp_gateway
    ports:
      - "3009:3009"
    # Volume mounts for SSH configuration
    # IMPORTANT: Mount your SSH config and keys as read-only
    volumes:
      # SSH configuration (read-only)
      - ${HOME}/.ssh/config:/home/mcp/.ssh/config:ro
      - ${HOME}/.ssh/known_hosts:/home/mcp/.ssh/known_hosts:ro
      # SSH keys (read-only)
      # Mount your SSH keys here - adjust paths as needed
      - ${HOME}/.ssh/id_ed25519:/home/mcp/.ssh/id_ed25519_mcp:ro
      - ${HOME}/.ssh/id_rsa:/home/mcp/.ssh/id_rsa:ro
      - ${HOME}/.ssh/id_rsa:/home/mcp/.ssh/id_rsa_openssh:ro
      - ${HOME}/.ssh/id_rsa:/home/mcp/.ssh/id_rsa_windows:ro
    labels:
      - "dev.orbstack.domains=ssh-mcp-server.orb.local"
      - "dev.orbstack.service=ssh-mcp-server"
      - "dev.orbstack.description=MCP SSH Agent HTTP Server"

networks:
  mcp_gateway:
    name: mcp_gateway
    external: true
